# Итоговый проект 4 модуля по дисциплине "ETL-процессы"

## Датасет

За основу взят датасет [Mental Health Dataset](https://www.kaggle.com/datasets/bhavikjikadara/mental-health-dataset), объемом в 300k строк и шириной в 17 столбцов. Исходные данные были получены в .csv-формате.

|Поле|Смысловое значение|
|-|-|
|timestamp|Дата опроса|
|gender|Пол опрошенного|
|country|Страна проживания опрошенного|
|occupation|Род деятельности|
|self_employeed|Самозанятость|
|family_history|Информация о наличии ментальных проблем в семье|
|treatment|Обращался ли опрашиваемый за лечением ментальных проблем|
|days_indoors||
|growing_stress||
|changes_habbits||
|mental_health_history||
|mood_swings||
|coping_struggles||
|work_interest||
|social_weakness||
|mental_health_interview||
|care_options||

## Задание 1: Работа с Yandex DataTransfer

#### Создание YDB
Для начала создадим YDB и таблицу с соответсвующими датасету типами полей. Она была создана через UI, поэтому здесь будет пропущен скрипт ее создания.

![ydb](/inc/ydb.png)

#### Подготовка данных
 Для загрузки данных в базу необходимо провести ряд изменений и трансформаций, так как, например, некоторые значения из датасета не подходят под значения типов YDB, строки не проиндексированы. Скрипт приведен в файле task_1\transform_1.py.

После этого загрузим данные из нашего файла в YDB командой task_1\ydb.sh. К сожалению, при выгрузке всего объема данных `ydb cli` выдавал ошибку (на скрине ниже), поэтому объем данных был сокращен до 100 тысяч записей.

![ydb_err](/inc/ydb_error.png)

Данные успешно загрузились в скорректированном объеме.

![ydb_suc](/inc/ydb_success.png)

#### Создание трансфера
Когда данные оказались в базе, можно приступать к созданию Data Transfer'а. Создадим его c эндпоинтами источника в YDB и приемника в Object Storage. Как видим, он завершил свою работу успешно.

![data_transfer](/inc/trnsfr_done.png)

#### Проверка результата
Проверим работоспособность нашего трансфера. Для этого перейдем в бакет Object Storage и найдем файл, в который данные должны были загрузиться. Находим его по пути 2025\06\05\mental_health.csv

![os_1](/inc/os_1.png)

Проверим содержимое файла - выгрузка прошла успешно

![os_2](/inc/os_2.png)

## Задание 2: Автоматизация работы с Yandex Data Processing при помощи Apache Airflow

## Задание 3: Работа с топиками Apache Kafka с помощью PySpark-заданий в Yandex Data Processing
